(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{3588:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),n=a(2115),r=a(5695),o=a(9505),i=a.n(o);function l(e){let{setForm:t}=e,[a,o]=(0,n.useState)(""),[l,u]=(0,n.useState)(""),c=(0,r.useRouter)(),g=async()=>{let e=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:a,password:l})});(await e.json()).success?(localStorage.setItem("username",a),c.push("/dashboard")):alert("Login failed")};return(0,s.jsxs)("div",{className:i().form,children:[(0,s.jsx)("input",{placeholder:"Username",className:i().input,value:a,onChange:e=>o(e.target.value)}),(0,s.jsx)("input",{placeholder:"Password",type:"password",className:i().input,value:l,onChange:e=>u(e.target.value)}),(0,s.jsx)("button",{className:i().button,onClick:g,children:"Login"}),(0,s.jsxs)("p",{className:i().switch,children:["Don't have an account?"," ",(0,s.jsx)("span",{className:i().link,onClick:()=>t("register"),children:"Register"})]})]})}var u=a(7529),c=a.n(u);function g(e){let{setForm:t}=e,[a,r]=(0,n.useState)(""),[o,i]=(0,n.useState)(""),[l,u]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),_=async()=>{let e=await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:o,privateKey:l,publicKey:g})}),s=await e.json();s.success?(alert("Registered successfully!"),t("login")):alert("Registration failed: "+s.result)};return(0,s.jsxs)("div",{className:c().form,children:[(0,s.jsx)("input",{placeholder:"Username",className:c().input,value:a,onChange:e=>r(e.target.value)}),(0,s.jsx)("input",{placeholder:"Password",type:"password",className:c().input,value:o,onChange:e=>i(e.target.value)}),(0,s.jsx)("textarea",{placeholder:"Private key (base64)",className:c().textarea,value:l,onChange:e=>u(e.target.value),rows:4}),(0,s.jsx)("textarea",{placeholder:"Public key (base64)",className:c().textarea,value:g,onChange:e=>h(e.target.value),rows:4}),(0,s.jsx)("button",{className:c().button,onClick:_,children:"Register"}),(0,s.jsxs)("p",{className:c().switch,children:["Already have an account?"," ",(0,s.jsx)("span",{className:c().link,onClick:()=>t("login"),children:"Login"})]})]})}var h=a(6447),_=a.n(h);function m(){let[e,t]=(0,n.useState)("login"),a=(0,r.useRouter)();return(0,s.jsx)("div",{className:_().page,children:(0,s.jsxs)("main",{className:_().container,children:[(0,s.jsx)("h1",{className:_().title,children:"Welcome"}),(0,s.jsx)("button",{className:_().guestButton,onClick:()=>{localStorage.removeItem("username"),document.cookie="uuid=; Max-Age=0; path=/",a.push("/dashboard")},children:"Continue as Guest"}),(0,s.jsx)("h2",{className:_().subtitle,children:"login"===e?"Login to your account":"Create a new account"}),"login"===e?(0,s.jsx)(l,{setForm:t}):(0,s.jsx)(g,{setForm:t})]})})}},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},6447:e=>{e.exports={page:"AuthPage_page__7yF0o",gradientFlow:"AuthPage_gradientFlow__TgcPs",container:"AuthPage_container__kSOoZ",title:"AuthPage_title__k5Lsa",subtitle:"AuthPage_subtitle__adf33",guestButton:"AuthPage_guestButton__SMZUO"}},6892:(e,t,a)=>{Promise.resolve().then(a.bind(a,3588))},7529:e=>{e.exports={form:"RegisterForm_form__Alfsv",input:"RegisterForm_input__BX8gj",button:"RegisterForm_button__DUUu3",switch:"RegisterForm_switch__lfNHu",link:"RegisterForm_link__2Ufjn",textarea:"RegisterForm_textarea__rNofQ"}},9505:e=>{e.exports={form:"LoginForm_form__a1265",input:"LoginForm_input__E4vWR",button:"LoginForm_button__HzBCb",switch:"LoginForm_switch__rkf6L",link:"LoginForm_link__RRXam"}}},e=>{var t=t=>e(e.s=t);e.O(0,[750,441,684,358],()=>t(6892)),_N_E=e.O()}]);